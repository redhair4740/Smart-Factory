# 编码规则模块 (vulcan-code)

## 模块说明
编码规则模块提供基于对象的编码规则生成功能。它允许用户创建和管理编码规则，并根据规则生成唯一的编码。
编码规则会被持久化到数据库中，并通过缓存机制提高性能。

## 核心功能

### 1. 编码规则管理
- 创建、修改、删除编码规则
- 启用/禁用编码规则
- 重置编码规则序列值

### 2. 编码生成
- 根据编码规则生成唯一编码
- 支持批量生成编码
- 分布式环境下通过分布式锁确保编码唯一性

### 3. 规则特性
- 支持前缀设置
- 支持日期格式设置
- 支持序列号长度设置
- 支持循环规则（按日、按月、按年循环）
- 支持步长设置

## 技术实现
- 使用Redis缓存编码规则，提高性能
- 使用Redisson实现分布式锁，确保编码唯一性
- 采用DDD架构设计，通过领域模型定义接口
- 支持多种持久化方式

## 示例编码格式
1. 订单编码: ORD20230501-00001
2. 客户编码: CUST202305-0001
3. 产品编码: P000001

## 接口说明

### 编码生成接口
```
POST /code/rule/generate
```

请求参数:
```json
{
  "ruleCode": "ORDER",
  "businessId": "123",
  "appId": "APP001",
  "currentDate": "2023-05-01"
}
```

响应结果:
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": "ORD20230501-00001"
}
```

### 批量生成接口
```
POST /code/rule/generate/batch?count=5
```

## 数据库设计
数据库脚本位于 `src/main/resources/sql/code_rule.sql`

## 启动说明
1. 导入数据库脚本
2. 配置application.yml中的数据库连接信息
3. 启动CodeApplication主类 